<html>
<head>
	<title>Jack Lovell</title>
	<meta name="description" content="Jack Lovell Art">
	<meta name="robots" content="index, nofollow" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">	
	<link rel="stylesheet" href="style.css">
	<script src="jquery-2.1.0.min.js"></script>
	<!-- <script src="script.js"></script> -->
	<script>



		display_original = [
			{
				name: "Kiss"
				,title: "Kiss"
				,body: "2019, Inkjet transfer, colored pencil, highlighter and pastel on paper, 28.5 x 21.4 inches"
				,url: "http://lovelljack.com/images/_MG_7841-1_1500_90q.jpg"
			}
			,{
				name: "Flowers"
				,title: "Flowers"
				,body: "2017, colored pencil on paper, 21.1 x 19.4 inches"
				,url: "http://lovelljack.com/images/Flowers_1500.jpg"
			}
			,{
				name: "Torso"
				,title: "Torso"
				,body: "2016, ink and graphite on paper, 22 x 21 inches"
				,url: "http://lovelljack.com/images/torso_900.jpg"
			}
			,{
				name: "Subway"
				,title: "Subway"
				,body: "2016, charcoal on paper, 18.4 x 23 inches"
				,url: "http://lovelljack.com/images/subway_1000.jpg"
			}
			,{
				name: "Bent Shape"
				,title: "Bent Shape"
				,body: "2008, charcoal on paper, 28.3 x 22.1 inches"
				,url: "http://lovelljack.com/images/Bent_Shape_1000.jpg"
			}
			,{
				name: "Parabola"
				,title: "Parabola"
				,body: "2008, charcoal on paper, 24.8 x 40 inches"
				,url: "http://lovelljack.com/images/Parabola_1000.jpg"
			}
			,{
				name: "Stock Photo"
				,title: "Stock Photo"
				,body: "20016, graphite on paper, 23 x 30 inches"
				,url: "http://lovelljack.com/images/handshake_1000.jpg"
			}
		];
		// add order index to each element for adding break divs after reorder
		display_original.forEach(function(e,i){
			// starting with 1 not 0
			e.order = i+1;
		});



		var col_count;
		var col_count_old;
		var display;



		$(document).ready(function(){







			// reorder for initial col count
			function setinitialview(){
				col_count = Number($("#images").css("column-count"));
				display = reorder(display_original, col_count);
				col_count_old = col_count;
				populateimages(display);
			}
			setinitialview();



			// reorder when column count changes
			// adapted from: http://thenewcode.com/948/Triggering-JavaScript-Actions-With-CSS-Media-Queries
			function checkForViewportChange(){
				col_count = Number($("#images").css("column-count"));
				if (col_count != col_count_old){
					display = reorder(display_original, col_count);
					col_count_old = col_count;
					$("#images").empty();
					populateimages(display);
				}
			}
			$(window).resize(function(){
			  checkForViewportChange();
			});



			// populate images
			function populateimages(arr){
				arr.forEach(function(e){
					// force column breaks
					if(e.order <= col_count){
						var div = $(document.createElement("div"))
						.addClass("break");
						$("#images").append(div);
					}
					// add image
					var img = $(document.createElement("img"))
					.attr("src", e.url)
					.attr("data-name", e.name);
					$("#images").append(img);
				});
				addclickhandlers();
			}




			// reorder for left-to-right
			// adapted from: https://hackernoon.com/masonry-layout-technique-react-demo-of-100-css-control-of-the-view-e4190fa4296
			function reorder(arr, columns){
				var cols = columns;
				var out = [];
				var col = 0;
				while(col < cols){
					for(i=0;i<arr.length;i+=cols){
						var val = arr[i+col];
						if(val !== undefined)
							out.push(val);
					}
					col++;
				}
				return out;
			}



			// click handlers
			function addclickhandlers(){
				$("#images img").click(function(){
					blowup($(this).attr("data-name"), display);
				});
				
				/*
				$(".blowup").click(function(){
					$(".blowup").css("display", "none");
				});
				*/
				
			}


			function nextindex(){
				return (indexes[0]+1) % display.length;
			}
			function previndex(){
				return (indexes[0]-1 + display.length) % display.length;
			}
			$(".arrow.left").click(function(){
				blowup(display[previndex()].name, display);
			});
			$(".arrow.right").click(function(){
				blowup(display[nextindex()].name, display);
			});
			$(".xbutton").click(function(){
				$(".blowup").css("display", "none");
			});
			document.onkeydown = function(e) {
		        e = e || window.event;
		        if (e.keyCode == '37') {
		        	//left arrow
		            blowup(display[previndex()].name, display);
		        }
		        else if (e.keyCode == '39') {
		            // righta arrow
		            blowup(display[nextindex()].name, display);
		        }
		        else if (e.keyCode === 27) {
		        	// esc
		        	$(".blowup").css("display", "none");
		        }
		    }






		});


		function blowup(name, arr){
			indexes = $.map(arr, function(obj, index) {
			    if(obj.name === name) {
			        return index;
			    }
			})
			item = arr[indexes[0]];
			$(".blowup img").attr("src", item.url);
			$(".blowup figcaption .title").text(item.title);
			$(".blowup figcaption .body").text(item.body);
			$(".blowup").css("display", "flex");
		}


	</script>
</head>
<body>


	<div class="name">Jack Lovell</div>


	<div id="images">
	</div>


	<div class="blowup">
		<figure>
			<img src="">
			<figcaption>
				<span class="title"></span>,&nbsp
				<span class="body"></span>
			</figcaption>
		</figure>
		<div class="closebutton">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="xbutton"><path d="M1.5 22.5l21-21m-21 0l21 21" vector-effect="non-scaling-stroke"></path></svg>
		</div>
		<div class="blowupcontrols noselect">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="arrow left"><path d="M0 10h17.5" vector-effect="non-scaling-stroke"></path><path d="M9.5 2l8 8-8 8" fill="none" vector-effect="non-scaling-stroke"></path></svg>
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="arrow right"><path d="M0 10h17.5" vector-effect="non-scaling-stroke"></path><path d="M9.5 2l8 8-8 8" fill="none" vector-effect="non-scaling-stroke"></path></svg>
		</div>
	</div>


</body>
</html>